#!/bin/sh

cd "$(dirname $0)/../../build"

DOCS_DIR=$(xdg-user-dir DOCUMENTS)

export LANG=en_US.UTF-8
export LD_BIND_NOW=1
export LD_LIBRARY_PATH="$(pwd)"
export JACK_DRIVER_DIR="$(pwd)/jack"
export LV2_PATH="$(pwd)/plugins:${DOCS_DIR}/MOD App/lv2"

export JACK_NO_AUDIO_RESERVATION=1
export JACK_NO_START_SERVER=1

export MOD_KEYS_PATH="${DOCS_DIR}/MOD App/keys"
# export MOD_LOG=1
# export MOD_PLUGIN_THREAD_PRIORITY=57

exec ./jackd -R -S -n mod-app -C ./jack/jack-session-alsamidi.conf -d portaudio -d 'ALSA::pulse' -r 48000 -p 256 -c 2
